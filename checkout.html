<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø·Ù„Ø¨ - Ø±ÙŠØ§Ø­ÙŠÙ†</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 p-4">

<div class="max-w-xl mx-auto bg-white p-5 rounded-xl shadow">

  <h2 class="text-2xl font-bold text-center mb-4">ğŸ§¾ Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø·Ù„Ø¨</h2>

  <!-- Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¹Ù…ÙŠÙ„ -->
  <div class="space-y-3">
    <input id="name" type="text" placeholder="Ø§Ù„Ø§Ø³Ù…" class="w-full border p-3 rounded">
    <input id="phone" type="tel" placeholder="Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ" class="w-full border p-3 rounded">
    <input id="address" type="text" placeholder="Ø§Ù„Ø¹Ù†ÙˆØ§Ù†" class="w-full border p-3 rounded">
  </div>

  <!-- Ø§Ù„ÙØ±Ø¹ -->
  <div class="mt-4 p-3 bg-gray-50 rounded text-sm">
    <strong>ğŸ“ Ø§Ù„ÙØ±Ø¹:</strong> 6 Ø£ÙƒØªÙˆØ¨Ø± â€“ Ø§Ù„Ø­ØµØ±ÙŠ â€“ Ù…ÙˆÙ„ Ø²Ù…Ø²Ù…
  </div>

  <!-- Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹ -->
  <div class="mt-4">
    <h3 class="font-bold mb-2">ğŸ’³ Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹</h3>
    <div class="flex gap-3">
      <button onclick="selectPayment('instapay')" class="pay-btn px-4 py-2 border rounded">Ø¥Ù†Ø³ØªØ§Ø¨Ø§ÙŠ</button>
      <button onclick="selectPayment('cash')" class="pay-btn px-4 py-2 border rounded">ÙƒØ§Ø´</button>
    </div>

   <!-- <div id="instapay-box" class="hidden mt-3 p-3 bg-green-50 rounded text-sm">
      Ø±Ù‚Ù… Ø¥Ù†Ø³ØªØ§Ø¨Ø§ÙŠ: <strong>01207772789</strong>
    </div>
  </div>

  <!-- Ù…Ù„Ø®Øµ Ø§Ù„Ø·Ù„Ø¨ -->
  <div class="mt-6 border rounded-xl p-4 bg-gray-50">
    <h3 class="font-bold text-lg mb-3 text-center">ğŸ§¾ Ù…Ù„Ø®Øµ Ø§Ù„Ø·Ù„Ø¨</h3>
    <div id="summary-items" class="space-y-2 text-sm"></div>

    <div class="border-t mt-3 pt-3 text-center font-bold">
      Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ: <span id="summary-total">0</span> Ø¬Ù†ÙŠÙ‡
    </div>
  </div>

  <!-- Ø²Ø± Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ -->
  <button onclick="sendWhatsApp()"
    class="w-full mt-6 py-4 bg-green-600 text-white rounded-xl font-bold text-lg">
    Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨ Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨
  </button>

</div>

<script>
/* ====== ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø³Ù„Ø© ====== */
const cart = JSON.parse(localStorage.getItem("cart")) || [];
let paymentMethod = "";

/* ====== Ù…Ù„Ø®Øµ Ø§Ù„Ø·Ù„Ø¨ ====== */
function renderSummary() {
  const itemsDiv = document.getElementById("summary-items");
  const totalSpan = document.getElementById("summary-total");

  if (cart.length === 0) {
    itemsDiv.innerHTML = "<p class='text-center text-gray-500'>Ø§Ù„Ø³Ù„Ø© ÙØ§Ø±ØºØ©</p>";
    totalSpan.textContent = "0";
    return;
  }

  let total = 0;
  itemsDiv.innerHTML = "";

  cart.forEach(item => {
    const itemTotal = item.unit
      ? item.price * item.quantity
      : (item.price * item.quantity) / 1000;

    total += itemTotal;

    itemsDiv.innerHTML += `
      <div class="flex justify-between">
        <span>${item.product} Ã— ${item.quantity}</span>
        <span>${itemTotal.toFixed(2)} Ø¬</span>
      </div>
    `;
  });

  totalSpan.textContent = total.toFixed(2);
}

/* ====== Ø§Ø®ØªÙŠØ§Ø± Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹ ====== */
function selectPayment(type) {
  paymentMethod = type;

  document.querySelectorAll(".pay-btn").forEach(b => b.classList.remove("bg-green-600","text-white"));
  event.target.classList.add("bg-green-600","text-white");

  document.getElementById("instapay-box").classList.toggle("hidden", type !== "instapay");
}

/* ====== Ø¥Ø±Ø³Ø§Ù„ ÙˆØ§ØªØ³Ø§Ø¨ ====== */
function sendWhatsApp() {
  if (cart.length === 0) {
    alert("Ø§Ù„Ø³Ù„Ø© ÙØ§Ø±ØºØ©");
    return;
  }

  const name = document.getElementById("name").value.trim();
  const phone = document.getElementById("phone").value.trim();
  const address = document.getElementById("address").value.trim();

  if (!name || !phone || !address || !paymentMethod) {
    alert("Ù…Ù† ÙØ¶Ù„Ùƒ Ø£ÙƒÙ…Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙˆØ§Ø®ØªØ± Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹");
    return;
  }

  let message = `ğŸŒ™Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯ Ù…Ù† Ù…Ø­Ù…ØµØ© Ø±ÙŠØ§Ø­ÙŠÙ†ğŸŒ™%0A%0A`;
  message += `Ø§Ù„Ø§Ø³Ù…: ${name}%0A`;
  message += `Ø§Ù„Ù‡Ø§ØªÙ: ${phone}%0A`;
  message += `Ø§Ù„Ø¹Ù†ÙˆØ§Ù†: ${address}%0A`;
  message += `Ø§Ù„ÙØ±Ø¹: 6 Ø£ÙƒØªÙˆØ¨Ø± â€“ Ø§Ù„Ø­ØµØ±ÙŠ â€“ Ù…ÙˆÙ„ Ø²Ù…Ø²Ù…%0A%0A`;
  message += `ğŸ›’ Ø§Ù„Ø·Ù„Ø¨:%0A`;

  let total = 0;

  cart.forEach(item => {
    const itemTotal = item.unit
      ? item.price * item.quantity
      : (item.price * item.quantity) / 1000;

    total += itemTotal;
    message += `- ${item.product} Ã— ${item.quantity} = ${itemTotal.toFixed(2)} Ø¬Ù†ÙŠÙ‡%0A`;
  });

  const now = new Date();
  message += `%0AØ§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ: ${total.toFixed(2)} Ø¬Ù†ÙŠÙ‡%0A`;
  message += `Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹: ${paymentMethod === "instapay" ? "Ø¥Ù†Ø³ØªØ§Ø¨Ø§ÙŠ" : "ÙƒØ§Ø´"}%0A`;
  message += `ğŸ“… ${now.toLocaleDateString("ar-EG")} â° ${now.toLocaleTimeString("ar-EG")}%0A%0A`;
  message += `Ø´ÙƒØ±Ø§Ù‹ Ù„ÙƒÙ… ÙˆÙƒÙ„ Ø¹Ø§Ù… ÙˆØ£Ù†ØªÙ… Ø¨Ø®ÙŠØ±!ğŸŒ™âœ¨`;

  window.open(`https://wa.me/2001207772789?text=${message}`, "_blank");
}

/* ØªØ´ØºÙŠÙ„ */
renderSummary();
</script>

</body>
</html>


